events {
} # events

http {
#     server {  # hoge
#         listen          4242;
#         server_name     example.com;
#         root            html/hoge;
#         index           index.html;
#         error_page      404  /404.html;
#     }

    # static file server
    server {
        listen          4242  default_server;
        server_name     localhost;

        location / {
            root            html;
            index           index.html;

            limit_except    GET {
                deny        all;
            }
        }

        location /cgi-bin/ {
            root            html;
            index           index.html;

            limit_except    GET POST {
                deny        all;
            }

            cgi_mode        on;
            cgi_extension   py php sh;
            cgi_timeout     3s;

        }

        location /autoindex_files/ {
            root            html;
            autoindex       on;

            limit_except    GET {
                deny        all;
            }
        }

        location /old.html {
            root            html;
            return          301     /new.html;
        }

        location /old/ {
            root            html;
            return          301     /new/;
        }

        # show parameter posted from form.html
        location /api/form-data {
            limit_except    POST {
                deny        all;
            }
        }

        location /api/show-response {
            limit_except    POST {
                deny        all;
            }
        }

        location /api/now {
            limit_except    GET {
                deny        all;
            }
        }

        # matched with /upload only
        # not match with /upload/hoge/huga
        location /upload {
            autoindex       on;
            client_max_body_size    20M;

            limit_except    GET POST DELETE {
                deny        all;
            }
        }

        location /a/b/c {
            limit_except    GET {
                deny        all;
            }
            root            html;
            index           file_c.html;
        }

        location /dir_a/ {
            limit_except    GET {
                deny        all;
            }
            root            html;
            index           a.html;
        }

        location /delete_only/ {
            limit_except    DELETE {
                deny        all;
            }
        }


        error_page      404                     /404.html;
        error_page      500  502  503  504      /50x.html;
        location = /50x.html {
            root        html;
        }

    } # server


    # CGI server
#     server {
#         listen          4343;
#         server_name     localhost  cgi_server;
#         root            html;
#
#         location /cgi-bin/ {
#             # CGI setting
#         }
#     } # server

} # http
